{"ast":null,"code":"import React,{useContext,useState}from\"react\";import axios from\"axios\";import{useNavigate}from'react-router-dom';import{AuthContext}from\"../context/AuthContext\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function Login(){const[formData,setFormData]=useState({email:\"\",password:\"\"});const navigate=useNavigate();//Initialize useNavigate\nconst{setUser}=useContext(AuthContext);function changeHandler(event){const{name,value}=event.target;setFormData(prevFormData=>({...prevFormData,[name]:value}));}async function submitHandler(event){event.preventDefault();// Here, you can send `formData` to your backend\ntry{const response=await axios.post(\"/user/login\",formData);const userData=response.data;// Save user data to localStorage\nlocalStorage.setItem('user',JSON.stringify(userData.user));const{token,user}=response.data;// Store the token in localStorage\nlocalStorage.setItem('token',token);// update user state in context\nsetUser(user);console.log(\"Login successful:\",response.data);navigate('/');// Handle successful login (e.g., save token, redirect)\n}catch(error){if(error.response.status===404){// Redirect to signup page if user is not found\nnavigate('/signup');}else{console.error('Login error:',error.response.data);// Handle other errors, such as invalid password\n}}}return/*#__PURE__*/_jsx(\"div\",{className:\"flex items-center justify-center min-h-screen p-4\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"w-full max-w-sm border-2 flex flex-col p-6 rounded-lg shadow-lg bg-white\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-2xl font-bold mb-6 text-center\",children:\"Login\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:submitHandler,children:[/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"input\",{type:\"email\",id:\"email\",name:\"email\",value:formData.email,required:true,placeholder:\"Enter email\",onChange:changeHandler,className:\"w-full h-[35px] outline outline-2 outline-slate-300 rounded-sm mb-4 p-2\"})}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"input\",{type:\"password\",id:\"password\",name:\"password\",value:formData.password,required:true,placeholder:\"Enter your Password\",onChange:changeHandler,className:\"w-full h-[35px] outline outline-2 outline-slate-300 rounded-sm mb-6 p-2\"})}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"button\",{className:\"w-full h-[40px] bg-blue-600 text-white font-bold rounded py-2 px-4\",children:\"Login\"})})]})]})});}export default Login;","map":{"version":3,"names":["React","useContext","useState","axios","useNavigate","AuthContext","jsx","_jsx","jsxs","_jsxs","Login","formData","setFormData","email","password","navigate","setUser","changeHandler","event","name","value","target","prevFormData","submitHandler","preventDefault","response","post","userData","data","localStorage","setItem","JSON","stringify","user","token","console","log","error","status","className","children","onSubmit","type","id","required","placeholder","onChange"],"sources":["D:/.MERN_Project/frontend/src/components/Login.js"],"sourcesContent":["import React, { useContext, useState } from \"react\";\r\nimport axios from \"axios\";\r\nimport { useNavigate } from 'react-router-dom';\r\nimport { AuthContext } from \"../context/AuthContext\";\r\n\r\nfunction Login() {\r\n  const [formData , setFormData] =useState({\r\n    email:\"\",\r\n    password:\"\",\r\n  });\r\n  const navigate = useNavigate(); //Initialize useNavigate\r\n  const {setUser} = useContext(AuthContext);\r\n\r\n  function changeHandler(event){\r\n    const {name , value} =event.target;\r\n    setFormData(prevFormData => ({\r\n      ...prevFormData,\r\n      [name]: value\r\n    }));\r\n  }\r\n\r\n async function submitHandler(event) {\r\n    event.preventDefault();\r\n    // Here, you can send `formData` to your backend\r\n    try {\r\n      const response = await axios.post(\"/user/login\", formData);\r\n      const userData = response.data;\r\n      // Save user data to localStorage\r\n      localStorage.setItem('user', JSON.stringify(userData.user));\r\n      const { token, user } = response.data;\r\n        // Store the token in localStorage\r\n      localStorage.setItem('token', token);\r\n      // update user state in context\r\n      setUser(user);\r\n      console.log(\"Login successful:\", response.data);\r\n      navigate('/');\r\n\r\n      // Handle successful login (e.g., save token, redirect)\r\n    } catch (error) {\r\n      if (error.response.status === 404) {\r\n        // Redirect to signup page if user is not found\r\n        navigate('/signup');\r\n    } else {\r\n        console.error('Login error:', error.response.data);\r\n        // Handle other errors, such as invalid password\r\n    }\r\n    }\r\n  }\r\n  return (\r\n    <div className=\"flex items-center justify-center min-h-screen p-4\">\r\n      <div className=\"w-full max-w-sm border-2 flex flex-col p-6 rounded-lg shadow-lg bg-white\">\r\n        <h1 className=\"text-2xl font-bold mb-6 text-center\">Login</h1>\r\n        <form onSubmit={submitHandler}>\r\n          <div>\r\n            <input\r\n              type=\"email\"\r\n              id=\"email\"\r\n              name=\"email\"\r\n              value={formData.email}\r\n              required\r\n              placeholder=\"Enter email\"\r\n              onChange={changeHandler}\r\n              className=\"w-full h-[35px] outline outline-2 outline-slate-300 rounded-sm mb-4 p-2\"\r\n            />\r\n          </div>\r\n          <div>\r\n            <input\r\n              type=\"password\"\r\n              id=\"password\"\r\n              name=\"password\"\r\n              value={formData.password}\r\n              required\r\n              placeholder=\"Enter your Password\"\r\n              onChange={changeHandler}\r\n              className=\"w-full h-[35px] outline outline-2 outline-slate-300 rounded-sm mb-6 p-2\"\r\n            />\r\n          </div>\r\n          <div>\r\n            <button className=\"w-full h-[40px] bg-blue-600 text-white font-bold rounded py-2 px-4\">\r\n             Login\r\n            </button>\r\n          </div>\r\n        </form>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Login;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}