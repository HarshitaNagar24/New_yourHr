{"ast":null,"code":"import React,{useEffect,useState}from\"react\";import axios from\"axios\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function UploadResume(){const[file,setFile]=useState(null);const[resumeUrl,setResumeUrl]=useState('');useEffect(()=>{// Fetch the user's current resume URL on component mount\nconst fetchUserResume=async()=>{try{const response=await axios.get('/user/current-resume',{headers:{'Authorization':`Bearer ${localStorage.getItem('token')}`}});setResumeUrl(response.data.resumeUrl);}catch(error){console.error('Error fetching current resume:',error);}};fetchUserResume();},[]);function handleFileChange(event){setFile(event.target.files[0]);}async function handleSubmit(event){event.preventDefault();if(!file){alert(\"Please select a file\");return;}const formData=new FormData();formData.append(\"resume\",file);try{const response=await axios.post('/user/upload',formData,{headers:{'Content-Type':'multipart/form-data','Authorization':`Bearer ${localStorage.getItem('token')}`}});// Update the resume URL to show the uploaded resume\nsetResumeUrl(response.data.resumeUrl);console.log(\"File uploaded successfully:\",response.data);alert(\"Resume uploaded successfully.\");}catch(error){console.error(\"Error uploading file:\",error.response.data);alert(\"Error uploading resume. Please try again.\");}}return/*#__PURE__*/_jsxs(\"div\",{className:\"w-max h-max border-2 flex flex-col self-center justify-self-center m-4 p-3\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-2xl font-bold\",children:\"Upload Resume\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"input\",{type:\"file\",name:\"resume\",accept:\".pdf,.doc,.docx\",onChange:handleFileChange,className:\"mb-4\"})}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"w-[300px] h-[40px] bg-blue-600 text-white font-bold rounded py-2 px-4\",children:\"Upload\"})})]}),resumeUrl&&/*#__PURE__*/_jsxs(\"div\",{className:\"mt-4\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-xl font-semibold\",children:\"Your Resume\"}),/*#__PURE__*/_jsx(\"a\",{href:resumeUrl,target:\"_blank\",rel:\"noopener noreferrer\",className:\"text-blue-500 hover:underline\",children:\"View Resume\"})]})]});}export default UploadResume;","map":{"version":3,"names":["React","useEffect","useState","axios","jsx","_jsx","jsxs","_jsxs","UploadResume","file","setFile","resumeUrl","setResumeUrl","fetchUserResume","response","get","headers","localStorage","getItem","data","error","console","handleFileChange","event","target","files","handleSubmit","preventDefault","alert","formData","FormData","append","post","log","className","children","onSubmit","type","name","accept","onChange","href","rel"],"sources":["D:/.MERN_Project/frontend/src/components/UploadResume.js"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport axios from \"axios\";\r\n\r\nfunction UploadResume() {\r\n  const [file, setFile] = useState(null);\r\n  const [resumeUrl, setResumeUrl] = useState('');\r\n\r\n  useEffect(() => {\r\n    // Fetch the user's current resume URL on component mount\r\n    const fetchUserResume = async () => {\r\n        try {\r\n            const response = await axios.get('/user/current-resume', {\r\n                headers: {\r\n                    'Authorization': `Bearer ${localStorage.getItem('token')}`,\r\n                }\r\n            });\r\n            setResumeUrl(response.data.resumeUrl);\r\n        } catch (error) {\r\n            console.error('Error fetching current resume:', error);\r\n        }\r\n    };\r\n    \r\n    fetchUserResume();\r\n}, []);\r\n\r\n  function handleFileChange(event) {\r\n    setFile(event.target.files[0]);\r\n  }\r\n\r\n  async function handleSubmit(event) {\r\n    event.preventDefault();\r\n    if (!file) {\r\n      alert(\"Please select a file\");\r\n      return;\r\n    }\r\n\r\n    const formData = new FormData();\r\n    formData.append(\"resume\", file);\r\n\r\n    try {\r\n      const response = await axios.post('/user/upload', formData, {\r\n        headers: {\r\n          'Content-Type': 'multipart/form-data',\r\n          'Authorization': `Bearer ${localStorage.getItem('token')}`\r\n        },\r\n      });\r\n      // Update the resume URL to show the uploaded resume\r\n      setResumeUrl(response.data.resumeUrl);\r\n\r\n      console.log(\"File uploaded successfully:\", response.data);\r\n      alert(\"Resume uploaded successfully.\");\r\n      \r\n    } catch (error) {\r\n      console.error(\"Error uploading file:\", error.response.data);\r\n      alert(\"Error uploading resume. Please try again.\");\r\n    }\r\n  }\r\n  return (\r\n    <div className=\"w-max h-max border-2 flex flex-col self-center justify-self-center m-4 p-3\">\r\n      <h1 className=\"text-2xl font-bold\">Upload Resume</h1>\r\n      <form onSubmit={handleSubmit}>\r\n        <div>\r\n          <input\r\n            type=\"file\"\r\n            name=\"resume\"\r\n            accept=\".pdf,.doc,.docx\"\r\n            onChange={handleFileChange}\r\n            className=\"mb-4\"\r\n          />\r\n        </div>\r\n        <div>\r\n          <button\r\n            type=\"submit\"\r\n            className=\"w-[300px] h-[40px] bg-blue-600 text-white font-bold rounded py-2 px-4\"\r\n          >\r\n            Upload\r\n          </button>\r\n        </div>\r\n      </form>\r\n      {resumeUrl && (\r\n                <div className=\"mt-4\">\r\n                    <h2 className=\"text-xl font-semibold\">Your Resume</h2>\r\n                    <a href={resumeUrl} target=\"_blank\" rel=\"noopener noreferrer\" className=\"text-blue-500 hover:underline\">View Resume</a>\r\n                </div>\r\n            )}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default UploadResume;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}